@model IList<Estabelecimento>
@using Microsoft.AspNetCore.Http
@inject Microsoft.AspNetCore.Http.IHttpContextAccessor HttpContextAccessor

@{
    ViewData["Title"] = "Listagem";
    if (HttpContextAccessor.HttpContext.Session.Get("UserSession") != null) { Layout = "_LayoutLogado"; }
}


<div>
    <div class="d-flex justify-content-center">
        <div class="w-75">
            <feedback texto="@TempData["Info"]" classe="alert alert-info"></feedback>
            <div style="margin-left: 10%">
                <p style="font-size: 42px; font-weight: bold">Buscando por<span style="color: #DE9AE8">&nbsp;@(ViewBag.Pesquisa != null ? ViewBag.Pesquisa : "...")</span></p>
            </div>
            @if(Model != null)
            {
        <div class="d-flex flex-column align-items-center">
            @foreach (var estab in Model)
            {
                <div class="d-flex align-items-center" style="background-color: aliceblue; border-radius: 7px; margin-bottom: 15px">
                    <div style="width: 70vw; height: 30vh" class="d-flex flex-row">
                        <div style="margin-right: 20px; width: 20vw; height: 30vh;">
                            <div><img style="width: 20vw; height: 30vh; border-radius: 7px 0 0 7px" src="@(estab.Foto == null ? "https://raw.githubusercontent.com/Poagilers-Fenix/WebApp-Challenge/main/Imagens/no-image-found.png?token=AOXNWKVBRD3WDDJKASDBZT3BHUBDY" : estab.Foto)" /></div>
                        </div>
                        <div class="d-flex justify-content-center align-items-center mx-4" style="width: 10vw; height: 30vh;">
                            <a class="btn text-white" style="background-color: #dda0dd;" asp-action="index" asp-route-id="@estab.EstabelecimentoId" asp-controller="estabelecimento">Ver Conteúdo</a>
                        </div>
                    </div>
                </div>
            </div>
        }
        </div>
        } @if(Model == null || Model.Count == 0) {
            <a asp-action="Index" asp-controller="home" style="text-decoration: none; color: #DDA0DD"><p class="h3 mt-5" style="text-align: center">Realize uma pesquisa!</p></a>
        }
    </div>
</div>
